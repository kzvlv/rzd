{% extends 'base.html' %}

{% block content %}
<div class="text-center bg-white p-10 md:p-16 rounded-xl shadow-lg">
    <h2 class="text-4xl font-bold text-rzd-gray-dark mb-4">
        Добро пожаловать!
    </h2>
    <p class="text-xl text-gray-600 mb-10 max-w-2xl mx-auto">
        Система бронирования мест в общежитиях Улан-Удэнского подразделения Восточно-Сибирского учебного центра профессиональных
        квалификаций - структурного подразделения филиала ОАО "РЖД".
    </p>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10 max-w-4xl mx-auto">

        <div class="bg-gray-100 p-6 rounded-lg shadow-sm flex flex-col items-center justify-center">
            <div class="text-4xl font-bold text-rzd-red">{{ stats.total_free }}</div>
            <div class="text-lg text-gray-600">Мест свободно сейчас</div>
            {% if stats.today_date %}
            <div class="text-xs text-gray-400 mt-1">на {{ stats.today_date }}</div>
            {% endif %}
        </div>

        <div class="bg-gray-100 p-6 rounded-lg shadow-sm flex flex-col items-center justify-center">
            <div class="text-4xl font-bold text-gray-700">{{ stats.total_capacity }}</div>
            <div class="text-lg text-gray-600">Всего мест</div>
        </div>

        <div class="bg-gray-100 p-6 rounded-lg shadow-sm flex flex-col items-center justify-center">
            <div class="text-4xl font-bold text-gray-700">{{ stats.dorms_count }}</div>
            <div class="text-lg text-gray-600">Общежития</div>
        </div>

    </div>
    <a href="{{ url_for('booking') }}" id="btn-start-booking" class="inline-block bg-rzd-red text-white font-bold py-4 px-12 text-lg rounded-lg hover:bg-red-800 transition-all duration-300 transform hover:-translate-y-0.5 shadow-lg">
        Начать бронирование
    </a>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.getElementById('btn-start-booking').addEventListener('click', function(e) {
        if (!isUserLoggedIn) {
            e.preventDefault();
            alert('Пожалуйста, авторизуйтесь, чтобы начать бронирование.');
        } else if (userRole === 'Commandant') {
             e.preventDefault();
             alert('Ваша роль "Комендант". Только "Предприятия" и "Администратор" могут создавать бронирования.');
        }
    });
</script>
{% endblock %}